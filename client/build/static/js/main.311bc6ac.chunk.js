(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,a,t){e.exports=t(38)},30:function(e,a,t){},38:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(21),c=t.n(l),s=t(5),o=t(2),m=(t(30),function(e){return fetch("/user/login",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{isAuthenticated:!1,user:{username:"",role:""}}}))}),i=function(e){return fetch("/user/register",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))},u=function(){return fetch("/user/logout").then((function(e){return e.json()})).then((function(e){return e}))},E=function(){return fetch("/user/authenticated").then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{isAuthenticated:!1,user:{username:"",role:""}}}))},d=t(4),v=Object(n.createContext)(),b=function(e){var a=e.children,t=Object(n.useState)(null),l=Object(d.a)(t,2),c=l[0],s=l[1],o=Object(n.useState)(!1),m=Object(d.a)(o,2),i=m[0],u=m[1],b=Object(n.useState)(!1),p=Object(d.a)(b,2),h=p[0],f=p[1];return Object(n.useEffect)((function(){E().then((function(e){s(e.user),u(e.isAuthenticated),f(!0)}))}),[]),r.a.createElement("div",null,h?r.a.createElement(v.Provider,{value:{user:c,setUser:s,isAuthenticated:i,setIsAuthenticated:u}},a):r.a.createElement("h1",null,"Loading"))},p=t(14),h=t(23),f=function(e){var a=Object(n.useContext)(v),t=a.isAuthenticated,l=a.user,c=a.setIsAuthenticated,o=a.setUser,m=function(){u().then((function(e){e.success&&(o(e.user),c(!1))}))};return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(s.b,{to:"/"},r.a.createElement("div",{className:"navbar-brand"},"Skybeat")),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"/"},r.a.createElement("li",{className:"nav-item nav-link"}," Home ")),r.a.createElement(s.b,{to:"/newreview"},r.a.createElement("li",{className:"nav-item nav-link"}," New Review ")),"admin"===l.role?r.a.createElement(s.b,{to:"/admin"},r.a.createElement("li",{className:"nav-item nav-link"}," Admin ")):null,r.a.createElement("button",{type:"button",className:"btn btn-link nav-item nav-link",onClick:m}," Logout ")):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"/"},r.a.createElement("li",{className:"nav-item nav-link"}," Home ")),r.a.createElement(s.b,{to:"/login"},r.a.createElement("li",{className:"nav-item nav-link"}," Login ")),r.a.createElement(s.b,{to:"/register"},r.a.createElement("li",{className:"nav-item nav-link"}," Register ")))),r.a.createElement("div",{className:"form-inline my-2 my-lg-0"},r.a.createElement("a",{href:"https://github.com/TheResinger/SkybeatReact"},r.a.createElement(p.a,{icon:h.a,size:"2x",color:"black"})))))},N=t(24),g=function(e){console.log(e.review.reviewScore);for(var a=[],t=0;t<e.review.reviewScore;t++)a.push(r.a.createElement(p.a,{key:"review[".concat(t,"]"),icon:N.a}));return r.a.createElement("div",null,r.a.createElement("div",{className:"card border-dark"},r.a.createElement("div",{className:"card-header border-0",style:{paddingBottom:"0px"}},r.a.createElement("h5",{className:"card-title text-center"},r.a.createElement("span",null,e.review.songName)," - ",r.a.createElement("span",null,e.review.artistName)),r.a.createElement("h6",{className:"card-title border-dark border-bottom text-center",style:{paddingBottom:"6px",marginBottom:"0px"}},e.review.reviewGenre)),r.a.createElement("div",{className:"row card-body"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",{className:"card-text"},e.review.reviewText),r.a.createElement("br",null),a))),r.a.createElement("br",null))},w=function(){return fetch("/user/reviews").then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"Unauthorized"},msgError:!0}}))},j=function(e){return fetch("/user/newreview",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"Unauthorized"},msgError:!0}}))},y=function(e){var a=e.reviews,t=0,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return a.forEach((function(e){switch(e.reviewGenre){case"Alternative":n[0]+=1,t+=1;break;case"Blues":n[1]+=1,t+=1;break;case"Classical":n[2]+=1,t+=1;break;case"Country":n[3]+=1,t+=1;break;case"Dance":n[4]+=1,t+=1;break;case"Electronic":n[5]+=1,t+=1;break;case"Hip-Hop":n[6]+=1,t+=1;break;case"Rap":n[7]+=1,t+=1;break;case"Jazz":n[8]+=1,t+=1;break;case"Latin":n[9]+=1,t+=1;break;case"Pop":n[10]+=1,t+=1;break;case"R&B":n[11]+=1,t+=1;break;case"Soul":n[12]+=1,t+=1;break;case"Rock":n[13]+=1,t+=1;break;case"Metal":n[14]+=1,t+=1}})),r.a.createElement("div",{className:"card text-center border-dark"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-text"},"All : ",t," Posts"),r.a.createElement("h5",{className:"card-text"},"Alternative : ",n[0]," Posts"),r.a.createElement("h5",{className:"card-text"},"Blues : ",n[1]," Posts"),r.a.createElement("h5",{className:"card-text"},"Classical : ",n[2]," Posts"),r.a.createElement("h5",{className:"card-text"},"Country : ",n[3]," Posts"),r.a.createElement("h5",{className:"card-text"},"Dance : ",n[4]," Posts"),r.a.createElement("h5",{className:"card-text"},"Electronic : ",n[5]," Posts"),r.a.createElement("h5",{className:"card-text"},"Hip-Hop : ",n[6]," Posts"),r.a.createElement("h5",{className:"card-text"},"Rap : ",n[7]," Posts"),r.a.createElement("h5",{className:"card-text"},"Jazz : ",n[8]," Posts"),r.a.createElement("h5",{className:"card-text"},"Latin : ",n[9]," Posts"),r.a.createElement("h5",{className:"card-text"},"Pop : ",n[10]," Posts"),r.a.createElement("h5",{className:"card-text"},"R&B : ",n[11]," Posts"),r.a.createElement("h5",{className:"card-text"},"Soul : ",n[12]," Posts"),r.a.createElement("h5",{className:"card-text"},"Rock : ",n[13]," Posts"),r.a.createElement("h5",{className:"card-text"},"Metal : ",n[14]," Posts")))},x=function(e){var a=Object(n.useState)([]),t=Object(d.a)(a,2),l=t[0],c=t[1];return Object(n.useEffect)((function(){w().then((function(e){c(e.reviews)}))}),[]),r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement(y,{reviews:l}),r.a.createElement("br",null)),r.a.createElement("div",{className:"col-md-7"},l.map((function(e){return r.a.createElement(g,{key:e._id,review:e})})))))},O=t(10),k=t(9),S=function(e){var a="alert ";return e.message.msgError?a+="alert-danger":a+="alert-primary",a+" text-center"},C=function(e){return r.a.createElement("div",{className:S(e),role:"alert"},e.message.msgBody)},P=function(e){var a=Object(n.useState)({username:"",password:""}),t=Object(d.a)(a,2),l=t[0],c=t[1],s=Object(n.useState)(null),o=Object(d.a)(s,2),i=o[0],u=o[1],E=Object(n.useContext)(v),b=function(e){c(Object(k.a)(Object(k.a)({},l),{},Object(O.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"form-group container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"}),r.a.createElement("div",{className:"col-md-8 card",style:{marginTop:"1em"}},r.a.createElement("br",null),r.a.createElement("h3",{className:"mb-4 mt-0 text-center"},"Please Sign In"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),m(l).then((function(a){var t=a.isAuthenticated,n=a.user,r=a.message;t?(E.setUser(n),E.setIsAuthenticated(t),e.history.push("/")):u(r)}))}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"username",className:"col-sm-3 col-form-label"},"Username:"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("input",{type:"text",name:"username",onChange:b,className:"form-control",placeholder:"Enter Username"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"password",className:"col-sm-3 col-form-label"},"Password:"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("input",{type:"password",name:"password",onChange:b,className:"form-control",placeholder:"Enter Password"}))),r.a.createElement("button",{className:"btn btn-large btn-primary btn-block",type:"submit"}," Log In ")),r.a.createElement("br",null)),i?r.a.createElement(C,{message:i}):null,r.a.createElement("div",{className:"col-md-2"})))},A=function(e){var a=Object(n.useState)({username:"",password:"",role:"user"}),t=Object(d.a)(a,2),l=t[0],c=t[1],s=Object(n.useState)(null),o=Object(d.a)(s,2),m=o[0],u=o[1],E=Object(n.useRef)(null);Object(n.useEffect)((function(){return function(){clearTimeout(E)}}),[]);var v=function(e){c(Object(k.a)(Object(k.a)({},l),{},Object(O.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"form-group container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"}),r.a.createElement("div",{className:"col-md-8 card",style:{marginTop:"1em"}},r.a.createElement("br",null),r.a.createElement("h3",{className:"mb-4 mt-0 text-center"},"Please Register"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),i(l).then((function(a){var t=a.message;u(t),c({username:"",password:"",role:""}),t.msgError||(E=setTimeout((function(){e.history.push("/login")}),2e3))}))}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"username",className:"col-sm-3 col-form-label"},"Username:"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("input",{type:"text",name:"username",onChange:v,className:"form-control",placeholder:"Enter Username",value:l.username}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"password",className:"col-sm-3 col-form-label"},"Password:"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("input",{type:"password",name:"password",onChange:v,className:"form-control",placeholder:"Enter Password",value:l.password}))),r.a.createElement("button",{className:"btn btn-large btn-primary btn-block",type:"submit"},"Register")),r.a.createElement("br",null),m?r.a.createElement(C,{message:m}):null),r.a.createElement("div",{className:"col-md-2"})))},R=function(e){var a=Object(n.useState)({songName:"",artistName:"",reviewGenre:"",reviewText:"",reviewScore:""}),t=Object(d.a)(a,2),l=t[0],c=t[1],s=Object(n.useState)(null),m=Object(d.a)(s,2),i=m[0],u=m[1],E=Object(n.useContext)(v),b=Object(o.f)(),p=function(e){var a=e.target,t=a.name,n=a.value;c(Object(k.a)(Object(k.a)({},l),{},Object(O.a)({},t,n)))},h=function(){c({songName:"",artistName:"",reviewGenre:"",reviewText:"",reviewScore:""})};return r.a.createElement("div",{className:"form-group container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"}),r.a.createElement("div",{className:"col-md-8 card",style:{marginTop:"1em"}},r.a.createElement("br",null),r.a.createElement("h2",{className:"mb-4 mt-0 text-center"},"Enter your review."),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(l),j(l).then((function(e){var a=e.message;h(),"Unauthorized"===a.msgBody?(u(a),E.setUser({username:"",role:""}),E.setIsAuthenticated(!1)):u(a),setTimeout((function(){"A Database Error has Occured"===!a&&b.push("/")}),5e3)}))}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"songName",className:"col-sm-3 col-form-label"},"Song Name"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("input",{type:"text",name:"songName",value:l.songName,onChange:p,className:"form-control",placeholder:"Enter the song name."}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"artistName",className:"col-sm col-form-label"},"Artist Name"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("input",{type:"text",name:"artistName",value:l.artistName,onChange:p,className:"form-control",placeholder:"Please Enter Artist Name"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"reviewGenre",className:"col-sm col-form-label"},"Genre"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"reviewGenre",className:"form-control",value:l.reviewGenre,onChange:p},r.a.createElement("option",{defaultValue:!0,hidden:!0},"Select a Genre"),r.a.createElement("option",{value:"Alternative"},"Alternative"),r.a.createElement("option",{value:"Blues"},"Blues"),r.a.createElement("option",{value:"Classical"},"Classical"),r.a.createElement("option",{value:"Country"},"Country"),r.a.createElement("option",{value:"Dance"},"Dance"),r.a.createElement("option",{value:"Electronic"},"Electronic"),r.a.createElement("option",{value:"Hip-Hop"},"Hip-Hop"),r.a.createElement("option",{value:"Rap"},"Rap"),r.a.createElement("option",{value:"Jazz"},"Jazz"),r.a.createElement("option",{value:"Latin"},"Latin"),r.a.createElement("option",{value:"Pop"},"Pop"),r.a.createElement("option",{value:"R&B"},"R&B"),r.a.createElement("option",{value:"Soul"},"Soul"),r.a.createElement("option",{value:"Rock"},"Rock"),r.a.createElement("option",{value:"Metal"},"Metal")))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"reviewText",className:"col-sm col-form-label"},"Review"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("textarea",{type:"text",name:"reviewText",value:l.reviewText,onChange:p,className:"form-control",placeholder:"Please Enter Review",style:{minHeight:"5em"}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"reviewGenre",className:"col-sm col-form-label"},"Score"),r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("select",{name:"reviewScore",className:"form-control",value:l.reviewScore,onChange:p},r.a.createElement("option",{defaultValue:!0,hidden:!0},"Select a Score"),r.a.createElement("option",{value:1},"1"),r.a.createElement("option",{value:2},"2"),r.a.createElement("option",{value:3},"3"),r.a.createElement("option",{value:4},"4"),r.a.createElement("option",{value:5},"5")))),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Submit")),r.a.createElement("br",null)),r.a.createElement("div",{className:"col-md-2"})),r.a.createElement("br",null),i?r.a.createElement(C,{message:i}):null)},T=function(){return r.a.createElement("h1",null,"Admin Page")},B=t(15),z=function(e){var a=e.component,t=e.roles,l=Object(B.a)(e,["component","roles"]),c=Object(n.useContext)(v),s=c.isAuthenticated,m=c.user;return r.a.createElement(o.b,Object.assign({},l,{render:function(e){return s?t.includes(m.role)?r.a.createElement(a,e):r.a.createElement(o.a,{to:{pathname:"/",state:{from:e.location}}}):r.a.createElement(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},F=function(e){var a=e.component,t=Object(B.a)(e,["component"]),l=Object(n.useContext)(v).isAuthenticated;return r.a.createElement(o.b,Object.assign({},t,{render:function(e){return l?r.a.createElement(o.a,{to:{pathname:"/",state:{from:e.location}}}):r.a.createElement(a,e)}}))};var H=function(){return r.a.createElement(s.a,null,r.a.createElement(f,null),r.a.createElement(o.b,{exact:!0,path:"/",component:x}),r.a.createElement(F,{path:"/login",component:P}),r.a.createElement(F,{path:"/register",component:A}),r.a.createElement(z,{path:"/newreview",roles:["user","admin"],component:R}),r.a.createElement(z,{path:"/admin",roles:["admin"],component:T}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null,r.a.createElement(H,null))),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.311bc6ac.chunk.js.map